<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <title>Painel</title>
  <style>
    body{background:#111;color:#0f0;font-family:monospace}
    #log{width:100%;height:300px;overflow-y:auto;border:1px solid #0f0;padding:8px}
    button{margin-top:10px;padding:8px 16px;background:#0f0;color:#000;border:none;cursor:pointer}
  </style>
</head>
<body>
  <h2>Scanner de Portas</h2>
  <pre id="log"></pre>
  <button onclick="downloadTxt()">Baixar resultado</button>

  <script>
  const alvos = ['192.168.1.1','8.8.8.8','1.1.1.1'];
  const portas = [21,22,23,25,53,80,110,443,3306,3389];
  const log = document.getElementById('log');
  let txt = '';

  function scan(ip, port, cb){
    const t = Date.now();
    const ws = new WebSocket(`ws://${ip}:${port}`);
    ws.onopen  = ()=>{ cb(ip,port,'aberta'); ws.close(); };
    ws.onerror = ()=>{ cb(ip,port,'fechada'); };
  }

  function report(ip,port,status){
 log.textContent += `${ip}:${port} -> ${status}\n`;
 txt            += `${ip}:${port} -> ${status}\r\n`;
  }

  alvos.forEach(ip=>{
    portas.forEach(port=> scan(ip,port,report) );
  });

  function downloadTxt(){
    const blob = new Blob([txt],{type:'text/plain'});
    const url  = URL.createObjectURL(blob);
    const a    = document.createElement('a');
    a.href     = url;
    a.download = 'scan.txt';
    a.click();
  }
  </script>
</body>
</html>
